{"version":3,"sources":["views/Logistik/Pemeliharaan/Pemeliharaan.js"],"names":["Pemeliharaan","props","state","nama","barang_id","akun_id","jumlah","modalIsOpen","harga","sewa","data","this","getPemeliharaansQuery","no","loading","pemeliharaans","map","pem","key","id","inventaris","barang","nama_barang","tanggal","akun","karyawan","status","onClick","onDelete","bind","color","size","className","pemeliharaan_id","Swal","fire","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","hapusPemeliharaan","variables","refetchQueries","query","getAllInventarisQuery","allInventaris","value","getAkunsQuery","akuns","jabatan","setState","e","preventDefault","toggleModal","addPemeliharaan","parseInt","Date","toLocaleDateString","inventaris_id","updateJumlahDiperbaikiInventaris","jumlah_diperbaiki","position","showConfirmButton","hover","bordered","striped","responsive","align","displayPemeliharaan","previous","tag","active","next","isOpen","onSubmit","submitForm","htmlFor","type","name","onChange","target","required","displayInventaris","placeholder","displayTeknisi","Component","compose","graphql","getBarangsQuery"],"mappings":"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","file":"static/js/82.c44281ad.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport {graphql} from 'react-apollo';\nimport { Link } from 'react-router-dom';\nimport * as compose from 'lodash.flowright';\nimport Swal from 'sweetalert2';\nimport {getPemeliharaansQuery, getAkunsQuery,hapusPemeliharaan,updateJumlahDiperbaikiInventaris,getAllInventarisQuery, addPemeliharaan, getBarangsQuery} from '../queries/queries';\nimport { \n  Form,\n  Card, \n  CardBody, \n  CardHeader, \n  Col, \n  Pagination, \n  PaginationItem, \n  PaginationLink, \n  Row,  \n  Table,\n  Button,\n  FormGroup,\n  Label,\n  Input,\n  Modal, ModalBody, ModalHeader\n} from 'reactstrap';\n\nclass Pemeliharaan extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      nama:'',\n      barang_id:'',\n      akun_id:'',\n      jumlah: 0,\n      modalIsOpen: false,  \n      harga: 0,\n      sewa: 0,\n    };\n  }\n\n  displayPemeliharaan(){\n    var data = this.props.getPemeliharaansQuery;\n    var no = 0;\n    if(data.loading){\n      return\n    } else {\n      return data.pemeliharaans.map(pem => {\n         no++;\n        return(\n          <tr key={pem.id}>\n            <td>{no}</td>\n            <td>{pem.inventaris.barang.nama_barang}</td>\n            <td>{pem.jumlah}</td> \n            <td>{pem.tanggal}</td>\n            <td>{pem.akun.karyawan.nama}</td>\n            <td>{pem.status}</td>\n            <td>\n              <Button onClick={this.onDelete.bind(this, pem.id)} color=\"danger\" size=\"sm\">\n                <i className=\"fa fa-trash\"></i>\n              </Button>\n            </td>\n          </tr>\n        );\n      });\n    }\n  }\n\n  onDelete(pemeliharaan_id){\n    Swal.fire({\n      title: 'Apakah anda Yakin?',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Ya, Saya Yakin!'\n    }).then((result) => {\n      if (result.isConfirmed) {\n        this.props.hapusPemeliharaan({\n          variables:{\n            id: pemeliharaan_id,        \n          },\n          refetchQueries:[{query:getPemeliharaansQuery}],\n        });\n        Swal.fire(\n          'Dihapus!',\n          'Pemeliharaan Telah Dihapus',\n          'success'\n        )\n      }\n    })\n  }\n\n  displayInventaris(){\n    var data = this.props.getAllInventarisQuery;\n    if(data.loading){\n      return (<h4>Loading Inventaris...</h4>);\n    } else {\n      return data.allInventaris.map(inventaris => {\n          return(\n            <option key={inventaris.id} value={inventaris.id}>{inventaris.barang.nama_barang}</option>\n          )\n      });\n    }\n  }\n  \n  displayTeknisi(){\n    var data = this.props.getAkunsQuery;\n    if(data.loading){\n      return (<div>Loading Akun...</div>);\n    } else {\n      return data.akuns.map(akun => {\n        if(akun.karyawan.jabatan === 'Teknisi'){\n          return(\n            <option key={akun.id} value={akun.id}>{akun.karyawan.nama}</option>\n          )\n        }\n      });\n    }\n  }\n\n  toggleModal(){\n    this.setState({\n      modalIsOpen: ! this.state.modalIsOpen\n    });\n  }\n\n  submitForm(e){\n    e.preventDefault();\n    this.toggleModal();\n    this.props.addPemeliharaan({\n      variables:{\n        jumlah: parseInt(this.state.jumlah),\n        tanggal: new Date().toLocaleDateString(),\n        status: 'Diperbaiki',\n        akun_id: this.state.akun_id,\n        inventaris_id:this.state.barang_id,\n      },\n      refetchQueries:[{query:getPemeliharaansQuery}]\n    });\n    this.props.updateJumlahDiperbaikiInventaris({\n        variables:{\n            barang_id:this.state.barang_id,\n            jumlah_diperbaiki: parseInt(this.state.jumlah),\n          },\n          refetchQueries:[{query:getAllInventarisQuery}]\n    });\n    Swal.fire({\n      position: 'center',\n      icon: 'success',\n      title: 'Pemeliharaan Baru Berhasil Disimpan',\n      showConfirmButton: true,\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"animated fadeIn\">\n        <Row>\n           <Col>\n            <Card>\n              <CardHeader>\n                <i className=\"fa fa-align-justify\"></i>Pemeliharaan Inventaris\n                <Button size=\"sm\" color=\"primary\" className=\"float-right mb-0\" onClick={this.toggleModal.bind(this)}>\n                  <i className=\"fa fa-plus\"></i> Tambah Pemeliharaan\n                </Button>\n              </CardHeader>\n              <CardBody>\n                <Table hover bordered striped responsive size=\"sm\">\n                  <thead align=\"center\">\n                  <tr>\n                    <th>No</th>\n                    <th>Nama Inventaris</th>\n                    <th>Jumlah</th>\n                    <th>Tanggal</th>\n                    <th>Teknisi</th>\n                    <th>Status</th>\n                    <th>Hapus</th>\n                  </tr>\n                  </thead>\n                  <tbody align=\"center\">\n                  {this.displayPemeliharaan()}\n                  </tbody>\n                </Table>\n                <nav>\n                  <Pagination>\n                    <PaginationItem><PaginationLink previous tag=\"button\">Prev</PaginationLink></PaginationItem>\n                    <PaginationItem active>\n                      <PaginationLink tag=\"button\">1</PaginationLink>\n                    </PaginationItem>\n                    <PaginationItem><PaginationLink tag=\"button\">2</PaginationLink></PaginationItem>\n                    <PaginationItem><PaginationLink tag=\"button\">3</PaginationLink></PaginationItem>\n                    <PaginationItem><PaginationLink tag=\"button\">4</PaginationLink></PaginationItem>\n                    <PaginationItem><PaginationLink next tag=\"button\">Next</PaginationLink></PaginationItem>\n                  </Pagination>\n                </nav>\n              </CardBody>\n            </Card>\n          </Col>     \n        </Row>\n        <Modal isOpen={this.state.modalIsOpen}>\n          <ModalHeader>From Tambah Pemeliharaan</ModalHeader>\n          <ModalBody>\n            <Form onSubmit={(e) => {this.submitForm(e)}}>\n              <FormGroup>\n              <Label htmlFor=\"name\">Nama Inventaris</Label>\n                <Input type=\"select\" name=\"nama\" onChange={(e) =>this.setState({barang_id:e.target.value})} id=\"nama\" required>\n                  <option value=\"\">Pilih Inventaris</option>\n                  {this.displayInventaris()}\n                </Input>\n              </FormGroup>\n              <FormGroup>\n                <Label htmlFor=\"name\">Jumlah</Label>\n                <Input type=\"number\" id=\"jumlah\" placeholder=\"Masukkan Jumlah Peralatan\" onChange={(e) =>this.setState({jumlah:e.target.value})} required />\n              </FormGroup>    \n              <FormGroup>\n              <Label htmlFor=\"name\">Nama Teknisi</Label>\n                <Input type=\"select\" name=\"nama\" onChange={(e) =>this.setState({akun_id:e.target.value})} id=\"nama\" required>\n                  <option value=\"\">Pilih Teknisi</option>\n                  {this.displayTeknisi()}\n                </Input>\n              </FormGroup>          \n              <Button type=\"submit\" color=\"primary\">Submit</Button>\n              <Button color=\"danger\" onClick={this.toggleModal.bind(this)}>Batal</Button>\n            </Form>\n          </ModalBody>  \n        </Modal>\n      </div>\n\n    );\n  }\n}\n\nexport default compose(\n  graphql(getPemeliharaansQuery, {name:\"getPemeliharaansQuery\"}),\n  graphql(getAkunsQuery, {name:\"getAkunsQuery\"}),\n  graphql(addPemeliharaan, {name:\"addPemeliharaan\"}),\n  graphql(hapusPemeliharaan, {name:\"hapusPemeliharaan\"}),\n  graphql(getBarangsQuery, {name:\"getBarangsQuery\"}),\n  graphql(updateJumlahDiperbaikiInventaris, {name:\"updateJumlahDiperbaikiInventaris\"}),\n  graphql(getAllInventarisQuery, {name:\"getAllInventarisQuery\"}),\n)(Pemeliharaan);\n"],"sourceRoot":""}