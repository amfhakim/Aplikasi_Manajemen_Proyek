(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[32],{104:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var n=t(96);function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){Object(n.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}},351:function(e,a,t){"use strict";t.r(a);var n=t(104),r=t(23),s=t(24),i=t(26),l=t(25),c=t(2),o=t.n(c),u=t(377),d=t(67),m=t(75),h=t.n(m),p=t(69),b=t(71),f=t(107),g=t(108),j=t(72),v=t(73),O=t(68),y=t(140),E=t(303),k=t(64),P=t(141),_=t(304),w=function(e){Object(i.a)(t,e);var a=Object(l.a)(t);function t(e){var n;return Object(r.a)(this,t),(n=a.call(this,e)).state={orderItems:[],kode:"",status:"Active",satuan:"",jenis:"",orderid:"",jenis_usaha:""},n}return Object(s.a)(t,[{key:"displayNewPurchaseOrder",value:function(){var e=this,a=this.props.getPurchaseOrdersQuery,t="",n="",r="",s="",i="";return a.purchaseOrders.map((function(e){return t=e.tanggal,n=e.status,r=e.kode,s=e.akun.karyawan.nama,i=e.id})),this.props.updateVendorPurchaseOrderMutation({variables:{id:i,vendor_id:"5e5deb9c2a448419e86f84a6"},refetchQueries:[{query:p.G}]}),o.a.createElement("div",null,o.a.createElement(b.a,{className:"form-horizontal"},o.a.createElement(f.a,null,o.a.createElement(g.a,{md:"4"},o.a.createElement(j.a,{row:!0},o.a.createElement(g.a,{md:"4"},o.a.createElement(v.a,{htmlFor:"name"},"Kode Purchase Order")),o.a.createElement(g.a,{md:"8"},o.a.createElement(O.a,{type:"text",name:"kode",id:"kode",value:r,disabled:!0})))),o.a.createElement(g.a,{md:"4"},o.a.createElement(j.a,{row:!0},o.a.createElement(g.a,{md:"4"},o.a.createElement(v.a,{htmlFor:"name"},"Status")),o.a.createElement(g.a,{md:"8"},o.a.createElement(O.a,{type:"text",name:"kode",id:"kode",value:n,disabled:!0}))))),o.a.createElement(f.a,null,o.a.createElement(g.a,{md:"4"},o.a.createElement(j.a,{row:!0},o.a.createElement(g.a,{md:"4"},o.a.createElement(v.a,{htmlFor:"name"},"Dibuat Oleh")),o.a.createElement(g.a,{md:"8"},o.a.createElement(O.a,{type:"text",name:"kode",id:"kode",value:s,disabled:!0})))),o.a.createElement(g.a,{md:"4"},o.a.createElement(j.a,{row:!0},o.a.createElement(g.a,{md:"4"},o.a.createElement(v.a,{htmlFor:"name"},"Tanggal")),o.a.createElement(g.a,{md:"8"},o.a.createElement(O.a,{type:"text",name:"kode",id:"kode",value:t,disabled:!0})))),o.a.createElement(g.a,{md:"4"},o.a.createElement(j.a,{row:!0},o.a.createElement(g.a,{md:"4"},o.a.createElement(v.a,{htmlFor:"name"},"Vendor")),o.a.createElement(g.a,{md:"8"},o.a.createElement(O.a,{type:"select",name:"vendor",id:"vendor",onChange:function(a){return e.updateVendorPurchaseOrder(i,a.target.value)}},o.a.createElement("option",null,"Pilih Vendor"),this.displayVendor())))))))}},{key:"updateVendorPurchaseOrder",value:function(e,a){var t=a.substring(0,24),n=a.substring(25);this.setState({jenis_usaha:n}),this.setState({orderid:e}),this.props.updateVendorPurchaseOrderMutation({variables:{id:e,vendor_id:t},refetchQueries:[{query:p.G}]})}},{key:"displayListPermintaanBarang",value:function(){var e=this,a=[];if(""!==this.state.jenis_usaha){var t=this.props.getListRequestsQuery;return"{}"!==JSON.stringify(t)?t.listrequests.map((function(t){if(t.jenis===e.state.jenis_usaha&&"Active"===t.status){var r=0,s=!1,i=0;if(0===a.length){r=parseInt(t.jumlah_barang)*parseInt(t.harga),r;var l={nama:t.nama_barang,jumlah:t.jumlah_barang,satuan:t.satuan,jenis:t.jenis,harga:r};a.push(l)}else if(a.map((function(e){e.nama===t.nama_barang&&(s=!0,i=parseInt(e.jumlah)+parseInt(t.jumlah_barang))})),!0===s){var c=0;r=parseInt(t.jumlah_barang)*parseInt(t.harga),a.map((function(e){e.nama===t.nama_barang&&(c=r+e.harga)})),r,a=(a=a.map((function(e){return e.nama===t.nama_barang?Object(n.a)(Object(n.a)({},e),{},{jumlah:i}):e}))).map((function(e){return e.nama===t.nama_barang?Object(n.a)(Object(n.a)({},e),{},{harga:c}):e}))}else{r=parseInt(t.jumlah_barang)*parseInt(t.harga),r;var u={nama:t.nama_barang,jumlah:t.jumlah_barang,satuan:t.satuan,jenis:t.jenis,harga:r};a.push(u)}return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,t.nama_barang),o.a.createElement("td",null,t.satuan),o.a.createElement("td",null,t.jumlah_barang),o.a.createElement("td",null,t.harga),o.a.createElement("td",null,r))}})):o.a.createElement("div",{align:"center"},"Tidak Ada Barang yang Perlu Dibeli")}return o.a.createElement("div",{align:"center"},"Pilih Vendor")}},{key:"displayVendor",value:function(){var e=this.props.getVendorsQuery;return e.loading?o.a.createElement("div",null,"Loading Divisi..."):e.vendors.map((function(e){return o.a.createElement("option",{key:e.id,value:[e.id,e.jenis_usaha]},e.nama)}))}},{key:"onDelete",value:function(){var e=this.props.getPurchaseOrdersQuery,a="";e.purchaseOrders.map((function(e){return a=e.id})),this.props.hapusPurchaseOrderMutation({variables:{id:a},refetchQueries:[{query:p.G}]}),this.props.history.push("/purchaseOrder/purchaseOrder")}},{key:"createListPurchaseOrder",value:function(){var e=this,a=[];if(""!==this.state.jenis_usaha){var t=this.props.getListRequestsQuery;if("{}"!==JSON.stringify(t)&&t.listrequests.map((function(t){if(t.jenis===e.state.jenis_usaha&&"Active"===t.status){var r=0,s=!1,i=0;if(0===a.length){r=parseInt(t.jumlah_barang)*parseInt(t.harga),r;var l={nama:t.nama_barang,jumlah:t.jumlah_barang,satuan:t.satuan,jenis:t.jenis,harga:r};a.push(l)}else if(a.map((function(e){e.nama===t.nama_barang&&(s=!0,i=parseInt(e.jumlah)+parseInt(t.jumlah_barang))})),!0===s){var c=0;r=parseInt(t.jumlah_barang)*parseInt(t.harga),a.map((function(e){e.nama===t.nama_barang&&(c=r+e.harga)})),r,a=(a=a.map((function(e){return e.nama===t.nama_barang?Object(n.a)(Object(n.a)({},e),{},{jumlah:i}):e}))).map((function(e){return e.nama===t.nama_barang?Object(n.a)(Object(n.a)({},e),{},{harga:c}):e}))}else{r=parseInt(t.jumlah_barang)*parseInt(t.harga),r;var o={nama:t.nama_barang,jumlah:t.jumlah_barang,satuan:t.satuan,jenis:t.jenis,harga:r};a.push(o)}}})),0===a.length)h.a.fire({position:"center",icon:"error",title:"Tidak Ada Daftar Barang",text:"Silahkan Pilih Vendor Lain",showConfirmButton:!0});else{t=this.props.getPurchaseOrdersQuery;var r="";t.purchaseOrders.map((function(e){return r=e.id})),a.map((function(a){return e.props.updateAllStatusListRequest({variables:{nama:a.nama,status:"Proses",order_id:r},refetchQueries:[{query:p.G}]})})),a.map((function(a){return e.props.addListItemPurchaseOrder({variables:{nama_barang:a.nama,jumlah_barang:parseInt(a.jumlah),satuan:a.satuan,jenis:a.jenis,purchaseOrder_id:r,harga:parseInt(a.harga),status:"Waiting"},refetchQueries:[{query:p.G},{query:p.w}]})})),this.props.history.push("/purchaseOrder/purchaseOrder"),h.a.fire({position:"center",icon:"success",title:"Pembelian Barang Berhasil Disimpan",showConfirmButton:!0})}}else h.a.fire({position:"center",icon:"error",title:"Pembelian Barang Gagal",text:"Silahkan Pilih Vendor Lain",showConfirmButton:!0})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"animated fadeIn"},o.a.createElement(f.a,null,o.a.createElement(g.a,null,o.a.createElement(y.a,null,o.a.createElement(E.a,null,"Form Buat Pembelian Barang",o.a.createElement(k.a,{color:"danger",onClick:this.onDelete.bind(this),className:"float-right mb-0"},"Batal")),o.a.createElement(P.a,null,this.displayNewPurchaseOrder(),o.a.createElement("hr",null),o.a.createElement(f.a,{align:"center"},o.a.createElement("h5",null,"Daftar Kebutuhan Barang")),o.a.createElement(_.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},o.a.createElement("thead",{align:"center"},o.a.createElement("tr",null,o.a.createElement("th",null,"Nama Barang"),o.a.createElement("th",null,"Satuan"),o.a.createElement("th",null,"Jumlah"),o.a.createElement("th",null,"Harga"),o.a.createElement("th",null,"Total"))),o.a.createElement("tbody",{align:"center"},this.displayListPermintaanBarang())),o.a.createElement("div",{align:"center"},o.a.createElement(k.a,{onClick:function(a){e.createListPurchaseOrder(a)},color:"primary"},"Submit")))))))}}]),t}(c.Component);a.default=d(Object(u.a)(p.I,{name:"getVendorsQuery"}),Object(u.a)(p.G,{name:"getPurchaseOrdersQuery"}),Object(u.a)(p.w,{name:"getListRequestsQuery"}),Object(u.a)(p.T,{name:"updateAllStatusListRequest"}),Object(u.a)(p.hb,{name:"updateVendorPurchaseOrderMutation"}),Object(u.a)(p.e,{name:"addListItemPurchaseOrder"}),Object(u.a)(p.R,{name:"hapusPurchaseOrderMutation"}))(w)},64:function(e,a,t){"use strict";var n=t(5),r=t(13),s=t(61),i=t(11),l=t(2),c=t.n(l),o=t(14),u=t.n(o),d=t(59),m=t.n(d),h=t(60),p={active:u.a.bool,"aria-label":u.a.string,block:u.a.bool,color:u.a.string,disabled:u.a.bool,outline:u.a.bool,tag:h.q,innerRef:u.a.oneOfType([u.a.object,u.a.func,u.a.string]),onClick:u.a.func,size:u.a.string,children:u.a.node,className:u.a.string,cssModule:u.a.object,close:u.a.bool},b=function(e){function a(a){var t;return(t=e.call(this,a)||this).onClick=t.onClick.bind(Object(s.a)(t)),t}Object(i.a)(a,e);var t=a.prototype;return t.onClick=function(e){if(!this.props.disabled)return this.props.onClick?this.props.onClick(e):void 0;e.preventDefault()},t.render=function(){var e=this.props,a=e.active,t=e["aria-label"],s=e.block,i=e.className,l=e.close,o=e.cssModule,u=e.color,d=e.outline,p=e.size,b=e.tag,f=e.innerRef,g=Object(r.a)(e,["active","aria-label","block","className","close","cssModule","color","outline","size","tag","innerRef"]);l&&"undefined"===typeof g.children&&(g.children=c.a.createElement("span",{"aria-hidden":!0},"\xd7"));var j="btn"+(d?"-outline":"")+"-"+u,v=Object(h.m)(m()(i,{close:l},l||"btn",l||j,!!p&&"btn-"+p,!!s&&"btn-block",{active:a,disabled:this.props.disabled}),o);g.href&&"button"===b&&(b="a");var O=l?"Close":null;return c.a.createElement(b,Object(n.a)({type:"button"===b&&g.onClick?"button":void 0},g,{className:v,ref:f,onClick:this.onClick,"aria-label":t||O}))},a}(c.a.Component);b.propTypes=p,b.defaultProps={color:"secondary",tag:"button"},a.a=b},68:function(e,a,t){"use strict";var n=t(5),r=t(13),s=t(61),i=t(11),l=t(2),c=t.n(l),o=t(14),u=t.n(o),d=t(59),m=t.n(d),h=t(60),p={children:u.a.node,type:u.a.string,size:u.a.oneOfType([u.a.number,u.a.string]),bsSize:u.a.string,valid:u.a.bool,invalid:u.a.bool,tag:h.q,innerRef:u.a.oneOfType([u.a.object,u.a.func,u.a.string]),plaintext:u.a.bool,addon:u.a.bool,className:u.a.string,cssModule:u.a.object},b=function(e){function a(a){var t;return(t=e.call(this,a)||this).getRef=t.getRef.bind(Object(s.a)(t)),t.focus=t.focus.bind(Object(s.a)(t)),t}Object(i.a)(a,e);var t=a.prototype;return t.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},t.focus=function(){this.ref&&this.ref.focus()},t.render=function(){var e=this.props,a=e.className,t=e.cssModule,s=e.type,i=e.bsSize,l=e.valid,o=e.invalid,u=e.tag,d=e.addon,p=e.plaintext,b=e.innerRef,f=Object(r.a)(e,["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"]),g=["radio","checkbox"].indexOf(s)>-1,j=new RegExp("\\D","g"),v=u||("select"===s||"textarea"===s?s:"input"),O="form-control";p?(O+="-plaintext",v=u||"input"):"file"===s?O+="-file":"range"===s?O+="-range":g&&(O=d?null:"form-check-input"),f.size&&j.test(f.size)&&(Object(h.t)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),i=f.size,delete f.size);var y=Object(h.m)(m()(a,o&&"is-invalid",l&&"is-valid",!!i&&"form-control-"+i,O),t);return("input"===v||u&&"function"===typeof u)&&(f.type=s),f.children&&!p&&"select"!==s&&"string"===typeof v&&"select"!==v&&(Object(h.t)('Input with a type of "'+s+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete f.children),c.a.createElement(v,Object(n.a)({},f,{ref:b,className:y,"aria-invalid":o}))},a}(c.a.Component);b.propTypes=p,b.defaultProps={type:"text"},a.a=b},71:function(e,a,t){"use strict";var n=t(5),r=t(13),s=t(61),i=t(11),l=t(2),c=t.n(l),o=t(14),u=t.n(o),d=t(59),m=t.n(d),h=t(60),p={children:u.a.node,inline:u.a.bool,tag:h.q,innerRef:u.a.oneOfType([u.a.object,u.a.func,u.a.string]),className:u.a.string,cssModule:u.a.object},b=function(e){function a(a){var t;return(t=e.call(this,a)||this).getRef=t.getRef.bind(Object(s.a)(t)),t.submit=t.submit.bind(Object(s.a)(t)),t}Object(i.a)(a,e);var t=a.prototype;return t.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},t.submit=function(){this.ref&&this.ref.submit()},t.render=function(){var e=this.props,a=e.className,t=e.cssModule,s=e.inline,i=e.tag,l=e.innerRef,o=Object(r.a)(e,["className","cssModule","inline","tag","innerRef"]),u=Object(h.m)(m()(a,!!s&&"form-inline"),t);return c.a.createElement(i,Object(n.a)({},o,{ref:l,className:u}))},a}(l.Component);b.propTypes=p,b.defaultProps={tag:"form"},a.a=b},72:function(e,a,t){"use strict";var n=t(5),r=t(13),s=t(2),i=t.n(s),l=t(14),c=t.n(l),o=t(59),u=t.n(o),d=t(60),m={children:c.a.node,row:c.a.bool,check:c.a.bool,inline:c.a.bool,disabled:c.a.bool,tag:d.q,className:c.a.string,cssModule:c.a.object},h=function(e){var a=e.className,t=e.cssModule,s=e.row,l=e.disabled,c=e.check,o=e.inline,m=e.tag,h=Object(r.a)(e,["className","cssModule","row","disabled","check","inline","tag"]),p=Object(d.m)(u()(a,!!s&&"row",c?"form-check":"form-group",!(!c||!o)&&"form-check-inline",!(!c||!l)&&"disabled"),t);return"fieldset"===m&&(h.disabled=l),i.a.createElement(m,Object(n.a)({},h,{className:p}))};h.propTypes=m,h.defaultProps={tag:"div"},a.a=h},73:function(e,a,t){"use strict";var n=t(5),r=t(13),s=t(2),i=t.n(s),l=t(14),c=t.n(l),o=t(59),u=t.n(o),d=t(60),m=c.a.oneOfType([c.a.number,c.a.string]),h=c.a.oneOfType([c.a.bool,c.a.string,c.a.number,c.a.shape({size:m,order:m,offset:m})]),p={children:c.a.node,hidden:c.a.bool,check:c.a.bool,size:c.a.string,for:c.a.string,tag:d.q,className:c.a.string,cssModule:c.a.object,xs:h,sm:h,md:h,lg:h,xl:h,widths:c.a.array},b={tag:"label",widths:["xs","sm","md","lg","xl"]},f=function(e,a,t){return!0===t||""===t?e?"col":"col-"+a:"auto"===t?e?"col-auto":"col-"+a+"-auto":e?"col-"+t:"col-"+a+"-"+t},g=function(e){var a=e.className,t=e.cssModule,s=e.hidden,l=e.widths,c=e.tag,o=e.check,m=e.size,h=e.for,p=Object(r.a)(e,["className","cssModule","hidden","widths","tag","check","size","for"]),b=[];l.forEach((function(a,n){var r=e[a];if(delete p[a],r||""===r){var s,i=!n;if(Object(d.k)(r)){var l,c=i?"-":"-"+a+"-";s=f(i,a,r.size),b.push(Object(d.m)(u()(((l={})[s]=r.size||""===r.size,l["order"+c+r.order]=r.order||0===r.order,l["offset"+c+r.offset]=r.offset||0===r.offset,l))),t)}else s=f(i,a,r),b.push(s)}}));var g=Object(d.m)(u()(a,!!s&&"sr-only",!!o&&"form-check-label",!!m&&"col-form-label-"+m,b,!!b.length&&"col-form-label"),t);return i.a.createElement(c,Object(n.a)({htmlFor:h},p,{className:g}))};g.propTypes=p,g.defaultProps=b,a.a=g},96:function(e,a,t){"use strict";function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}t.d(a,"a",(function(){return n}))}}]);
//# sourceMappingURL=32.ec987b84.chunk.js.map