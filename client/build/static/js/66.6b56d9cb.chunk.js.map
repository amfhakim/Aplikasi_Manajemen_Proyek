{"version":3,"sources":["views/Logistik/PermintaanBarang/PermintaanBarang.js","../node_modules/reactstrap/es/Button.js"],"names":["PermintaanBarang","props","loggedIn","localStorage","getItem","state","akun_id","kode","nama","jumlah","satuan","div_id","request_id","addRequest","this","hapusPermintaanBarangMutation","variables","id","refetchQueries","query","getPermintaanBarangsQuery","hapusManyListRequestMutation","data1","no","loading","permintaanBarangs","map","request","key","akun","karyawan","divisi","tanggal","status","to","color","size","className","nomor","parseInt","substring","newKode","addPermintaanBarangMutation","Date","toLocaleDateString","getKodeBaru","tanggal_setuju","disetujui_id","history","push","onClick","addRequestHandler","bind","hover","bordered","striped","responsive","align","displayRequest","previous","tag","active","next","Component","compose","graphql","name","getListRequestsQuery","propTypes","PropTypes","bool","string","block","disabled","outline","tagPropType","innerRef","oneOfType","object","func","children","node","cssModule","close","Button","_React$Component","_this","call","_assertThisInitialized","_inheritsLoose","_proto","prototype","e","preventDefault","render","_this$props","ariaLabel","Tag","attributes","_objectWithoutPropertiesLoose","React","createElement","btnOutlineColor","classes","mapToCssModules","classNames","href","defaultAriaLabel","_extends","type","undefined","ref","defaultProps"],"mappings":"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","file":"static/js/66.6b56d9cb.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect, Link } from 'react-router-dom';\nimport {graphql} from 'react-apollo';\nimport * as compose from 'lodash.flowright';\nimport { getPermintaanBarangsQuery, addPermintaanBarangMutation, hapusPermintaanBarangMutation, getListRequestsQuery, hapusManyListRequestMutation} from '../queries/queries';\nimport { Button, Card, CardBody, CardHeader, Col, Pagination, PaginationItem, PaginationLink, Row, Table } from 'reactstrap';\n\nclass PermintaanBarang extends Component {\n\n   constructor(props){\n    super(props);\n    const username= localStorage.getItem(\"username\")\n\n    let loggedIn = true \n      if(username == null){\n        loggedIn = false\n      }\n    this.state = {\n      akun_id: localStorage.getItem(\"user_id\"),\n      kode:'',\n      nama:'',\n      jumlah:'',\n      satuan:'',\n      div_id:'',\n      request_id:'',\n      addRequest:false,\n      loggedIn\n      }\n  }\n\n  onDelete(request_id){\n   this.props.hapusPermintaanBarangMutation({\n      variables:{\n        id: request_id,        \n      },\n      refetchQueries:[{query:getPermintaanBarangsQuery}],\n    });\n   this.props.hapusManyListRequestMutation({\n      variables:{\n        id: request_id,        \n      },\n      refetchQueries:[{query:getPermintaanBarangsQuery}],\n    });\n  }\n\n  displayRequest(){\n    var data1 = this.props.getPermintaanBarangsQuery;\n    var no = 0;\n    if(data1.loading){\n      return (<div>Loading Permintaan Barang...</div>);\n    } else {\n      return data1.permintaanBarangs.map(request => {\n        no++;\n        return(\n          <tr key={request.id}>\n            <td>{no}</td>\n            <td>{request.kode}</td>\n            <td>{request.akun.karyawan.divisi.nama}</td>\n            <td>{request.tanggal}</td>\n            <td>{request.status}</td>\n            <td>\n              <Link to={`/permintaanBarang/detailPermintaanBarang/${request.id}`}>\n              <Button color=\"primary\" size=\"sm\">\n                <i className=\"fa fa-file\"></i>\n                </Button>\n              </Link>\n            </td>\n          </tr>\n        );\n      });\n    }\n  }\n  getKodeBaru(){\n    var newKode = 'R';\n    var kode = '';\n    var nomor = 1;\n    var data = this.props.getPermintaanBarangsQuery;\n    data.permintaanBarangs.map(request => {\n      if(request.kode !== ''){\n        kode = request.kode\n      } \n    })\n    if(kode !== ''){\n      nomor = parseInt(kode.substring(1,4))+1\n    }\n    if(nomor < 10){\n      kode = newKode+\"00\"+nomor;\n    }else if (nomor >= 10 && nomor < 100){\n      kode = newKode+\"0\"+nomor;\n    }else {\n      kode = newKode+\"\"+nomor;\n    }\n    return kode;\n  }\n\n  addRequestHandler(){\n    this.props.addPermintaanBarangMutation({\n      variables:{\n        tanggal: new Date().toLocaleDateString(),\n        status: 'Belum Disetujui',\n        akun_id: this.state.akun_id,\n        kode: this.getKodeBaru(),\n        tanggal_setuju: '',\n        disetujui_id: '5f7d7b275e9e27240c35abcf',\n      },\n      refetchQueries:[{query:getPermintaanBarangsQuery}],\n    });\n    this.props.history.push(\"/permintaanBarang/buatPermintaanBarang\");\n  }\n\n  render() {\n    if(this.state.loggedIn === false){\n      return <Redirect to=\"/login\" />\n    }\n    return (\n      <div className=\"animated fadeIn\">\n        <Row>\n          <Col>\n            <Card>\n              <CardHeader>\n                <Row>\n                <Col>\n                  <h5>Daftar Permintaan Barang</h5>\n                </Col>\n                <Col>\n                    <Button color=\"primary\" onClick={this.addRequestHandler.bind(this)} className={'float-right mb-0'}>\n                    <i className=\"fa fa-plus mr-2\"></i>Buat Permintaan Barang\n                    </Button>\n                  \n                </Col>\n                </Row>\n              </CardHeader>\n              <CardBody>\n                <Table hover bordered striped responsive size=\"sm\">\n                  <thead align=\"center\">\n                  <tr>\n                    <th>No</th>\n                    <th>Kode</th>\n                    <th>Divisi</th>\n                    <th>Tanggal</th>\n                    <th>Status</th>\n                    <th>Aksi</th>\n                    \n                  </tr>\n                  </thead>\n                  <tbody align=\"center\">\n                  {this.displayRequest()}\n                  </tbody>\n                </Table>\n                \n                  <nav>\n                    <Pagination>\n                      <PaginationItem><PaginationLink previous tag=\"button\">Prev</PaginationLink></PaginationItem>\n                      <PaginationItem active>\n                        <PaginationLink tag=\"button\">1</PaginationLink>\n                      </PaginationItem>\n                      <PaginationItem><PaginationLink tag=\"button\">2</PaginationLink></PaginationItem>\n                      <PaginationItem><PaginationLink tag=\"button\">3</PaginationLink></PaginationItem>\n                      <PaginationItem><PaginationLink tag=\"button\">4</PaginationLink></PaginationItem>\n                      <PaginationItem><PaginationLink next tag=\"button\">Next</PaginationLink></PaginationItem>\n                    </Pagination>\n                  </nav>\n                \n              </CardBody>\n            </Card>\n          </Col>\n        </Row>\n      </div>\n\n    );\n  }\n}\n\nexport default compose(\n  graphql(getPermintaanBarangsQuery, {name:\"getPermintaanBarangsQuery\"}),\n  graphql(getListRequestsQuery, {name:\"getListRequestsQuery\"}),\n  graphql(addPermintaanBarangMutation, {name:\"addPermintaanBarangMutation\"}),\n  graphql(hapusPermintaanBarangMutation, {name:\"hapusPermintaanBarangMutation\"}),\n  graphql(hapusManyListRequestMutation, {name:\"hapusManyListRequestMutation\"}),\n)(PermintaanBarang);\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  active: PropTypes.bool,\n  'aria-label': PropTypes.string,\n  block: PropTypes.bool,\n  color: PropTypes.string,\n  disabled: PropTypes.bool,\n  outline: PropTypes.bool,\n  tag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.func, PropTypes.string]),\n  onClick: PropTypes.func,\n  size: PropTypes.string,\n  children: PropTypes.node,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  close: PropTypes.bool\n};\nvar defaultProps = {\n  color: 'secondary',\n  tag: 'button'\n};\n\nvar Button = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Button, _React$Component);\n\n  function Button(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.onClick = _this.onClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = Button.prototype;\n\n  _proto.onClick = function onClick(e) {\n    if (this.props.disabled) {\n      e.preventDefault();\n      return;\n    }\n\n    if (this.props.onClick) {\n      return this.props.onClick(e);\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        active = _this$props.active,\n        ariaLabel = _this$props['aria-label'],\n        block = _this$props.block,\n        className = _this$props.className,\n        close = _this$props.close,\n        cssModule = _this$props.cssModule,\n        color = _this$props.color,\n        outline = _this$props.outline,\n        size = _this$props.size,\n        Tag = _this$props.tag,\n        innerRef = _this$props.innerRef,\n        attributes = _objectWithoutPropertiesLoose(_this$props, [\"active\", \"aria-label\", \"block\", \"className\", \"close\", \"cssModule\", \"color\", \"outline\", \"size\", \"tag\", \"innerRef\"]);\n\n    if (close && typeof attributes.children === 'undefined') {\n      attributes.children = /*#__PURE__*/React.createElement(\"span\", {\n        \"aria-hidden\": true\n      }, \"\\xD7\");\n    }\n\n    var btnOutlineColor = \"btn\" + (outline ? '-outline' : '') + \"-\" + color;\n    var classes = mapToCssModules(classNames(className, {\n      close: close\n    }, close || 'btn', close || btnOutlineColor, size ? \"btn-\" + size : false, block ? 'btn-block' : false, {\n      active: active,\n      disabled: this.props.disabled\n    }), cssModule);\n\n    if (attributes.href && Tag === 'button') {\n      Tag = 'a';\n    }\n\n    var defaultAriaLabel = close ? 'Close' : null;\n    return /*#__PURE__*/React.createElement(Tag, _extends({\n      type: Tag === 'button' && attributes.onClick ? 'button' : undefined\n    }, attributes, {\n      className: classes,\n      ref: innerRef,\n      onClick: this.onClick,\n      \"aria-label\": ariaLabel || defaultAriaLabel\n    }));\n  };\n\n  return Button;\n}(React.Component);\n\nButton.propTypes = propTypes;\nButton.defaultProps = defaultProps;\nexport default Button;"],"sourceRoot":""}